"use client";

import React from "react";
import QRCode from "react-qr-code";

const Qrcode = ({ number }: { number: string | number }) => {
  const [clicked, setClicked] = React.useState(false);
  return (
    <>
      <div
        className="p-2 bg-white rounded border border-text/10 cursor-pointer relative"
        onClick={() => setClicked(true)}
      >
        <QRCode
          value={String(number)}
          className="w-16 h-16"
          bgColor="rgb( var(--color-white) / 1 )"
          fgColor="rgb( var(--color-text) / 1 )"
        />
        <svg
          viewBox="0 0 19 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="absolute -right-2 -bottom-2 bg-white rounded-full p-1 border border-text/10 w-5 h-5"
        >
          <path
            d="M6.16797 7.56281H5.16797C4.88464 7.56281 4.64714 7.46697 4.45547 7.27531C4.2638 7.08364 4.16797 6.84614 4.16797 6.56281C4.16797 6.27947 4.2638 6.04197 4.45547 5.85031C4.64714 5.65864 4.88464 5.56281 5.16797 5.56281H6.16797V4.56281C6.16797 4.27947 6.2638 4.04197 6.45547 3.85031C6.64714 3.65864 6.88464 3.56281 7.16797 3.56281C7.4513 3.56281 7.6888 3.65864 7.88047 3.85031C8.07214 4.04197 8.16797 4.27947 8.16797 4.56281V5.56281H9.16797C9.4513 5.56281 9.6888 5.65864 9.88047 5.85031C10.0721 6.04197 10.168 6.27947 10.168 6.56281C10.168 6.84614 10.0721 7.08364 9.88047 7.27531C9.6888 7.46697 9.4513 7.56281 9.16797 7.56281H8.16797V8.56281C8.16797 8.84614 8.07214 9.08364 7.88047 9.27531C7.6888 9.46697 7.4513 9.56281 7.16797 9.56281C6.88464 9.56281 6.64714 9.46697 6.45547 9.27531C6.2638 9.08364 6.16797 8.84614 6.16797 8.56281V7.56281ZM7.16797 13.0628C5.3513 13.0628 3.8138 12.4336 2.55547 11.1753C1.29714 9.91697 0.667969 8.37947 0.667969 6.56281C0.667969 4.74614 1.29714 3.20864 2.55547 1.95031C3.8138 0.691972 5.3513 0.0628052 7.16797 0.0628052C8.98464 0.0628052 10.5221 0.691972 11.7805 1.95031C13.0388 3.20864 13.668 4.74614 13.668 6.56281C13.668 7.29614 13.5513 7.9878 13.318 8.6378C13.0846 9.28781 12.768 9.86281 12.368 10.3628L17.968 15.9628C18.1513 16.1461 18.243 16.3795 18.243 16.6628C18.243 16.9461 18.1513 17.1795 17.968 17.3628C17.7846 17.5461 17.5513 17.6378 17.268 17.6378C16.9846 17.6378 16.7513 17.5461 16.568 17.3628L10.968 11.7628C10.468 12.1628 9.89297 12.4795 9.24297 12.7128C8.59297 12.9461 7.9013 13.0628 7.16797 13.0628ZM7.16797 11.0628C8.41797 11.0628 9.48047 10.6253 10.3555 9.75031C11.2305 8.87531 11.668 7.81281 11.668 6.56281C11.668 5.31281 11.2305 4.25031 10.3555 3.37531C9.48047 2.50031 8.41797 2.06281 7.16797 2.06281C5.91797 2.06281 4.85547 2.50031 3.98047 3.37531C3.10547 4.25031 2.66797 5.31281 2.66797 6.56281C2.66797 7.81281 3.10547 8.87531 3.98047 9.75031C4.85547 10.6253 5.91797 11.0628 7.16797 11.0628Z"
            fill="rgb(var(--color-text) / 1)"
          />
        </svg>
      </div>
      {clicked ? (
        <div
          className="z-50 fixed top-0 left-0 flex flex-col gap-4 items-center justify-center backdrop-blur-xl w-full h-full"
          onClick={() => setClicked(false)}
        >
          <div className="bg-white rounded border border-text/10 p-[2vmin] w-[75vmin] h-[75vmin] aspect-square">
            <QRCode
              value={String(number)}
              className="w-full h-full"
              bgColor="rgb( var(--color-white) / 0 )"
              fgColor="rgb( var(--color-text) / 1 )"
            />
          </div>
          <div className="flex flex-row items-center justify-center gap-2 cursor-pointer">
            <p className="text-xl">닫기</p>
            <svg
              width="14"
              height="14"
              viewBox="0 0 14 14"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M7.00078 8.39999L2.10078 13.3C1.91745 13.4833 1.68411 13.575 1.40078 13.575C1.11745 13.575 0.884115 13.4833 0.700781 13.3C0.517448 13.1167 0.425781 12.8833 0.425781 12.6C0.425781 12.3167 0.517448 12.0833 0.700781 11.9L5.60078 6.99999L0.700781 2.09999C0.517448 1.91665 0.425781 1.68332 0.425781 1.39999C0.425781 1.11665 0.517448 0.883321 0.700781 0.699988C0.884115 0.516654 1.11745 0.424988 1.40078 0.424988C1.68411 0.424988 1.91745 0.516654 2.10078 0.699988L7.00078 5.59999L11.9008 0.699988C12.0841 0.516654 12.3174 0.424988 12.6008 0.424988C12.8841 0.424988 13.1174 0.516654 13.3008 0.699988C13.4841 0.883321 13.5758 1.11665 13.5758 1.39999C13.5758 1.68332 13.4841 1.91665 13.3008 2.09999L8.40078 6.99999L13.3008 11.9C13.4841 12.0833 13.5758 12.3167 13.5758 12.6C13.5758 12.8833 13.4841 13.1167 13.3008 13.3C13.1174 13.4833 12.8841 13.575 12.6008 13.575C12.3174 13.575 12.0841 13.4833 11.9008 13.3L7.00078 8.39999Z"
                fill="rgb(var(--color-text) / 1)"
              />
            </svg>
          </div>
        </div>
      ) : null}
    </>
  );
};

export default Qrcode;
